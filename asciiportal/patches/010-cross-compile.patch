--- ./ASCIIpOrtal-linux-Makefile.txt.orig	2009-11-14 12:39:36.000000000 +0300
+++ ./ASCIIpOrtal-linux-Makefile.txt	2012-05-30 22:39:58.429945001 +0400
@@ -1,14 +1,5 @@
 # Makefile by kaw
-
-# Requires PDCSDL, set PDCSDLDIR to point to a compiled version.
-
-PDCSVER=3.4
-PDCSDLDIR = ./PDCurses-$(PDCSVER)
-
-PACKAGENAME = asciiportal-linux64
-WINDOWSZIP = asciiportal.zip
-
-GPPOPTS = -O2
+CFLAGS += -D__NOSDL__ -D__NOSOUND__ -U__DINGOO__ -U__GP2X__
 
 all: asciiportal
 
@@ -16,37 +7,9 @@
 	rm -f *.o
 	rm -f asciiportal
 
-fullclean: clean
-	rm -rf $(PACKAGENAME)
-	rm -f $(PACKAGENAME).tar.gz
-	rm -rf $(PDCSDLDIR)
-
-package: fullclean asciiportal
-	strip asciiportal
-	upx asciiportal
-	mkdir $(PACKAGENAME)
-	unzip -d $(PACKAGENAME) $(WINDOWSZIP)
-	cp Makefile $(PACKAGENAME)/source
-	rm $(PACKAGENAME)/*.exe
-	rm $(PACKAGENAME)/*.bat
-	rm $(PACKAGENAME)/*.dll
-	cp asciiportal $(PACKAGENAME)/
-	tar cvfz $(PACKAGENAME).tar.gz $(PACKAGENAME)
-
-%.o: %.cpp $(PDCSDLDIR)
-	g++ -I $(PDCSDLDIR) -c $(GPPOPTS) $<
-
-asciiportal: al_input.o ap_draw.o ap_play.o ap_sound.o main.o menu.o $(PDCSDLDIR)/sdl1/libpdcurses.a
-	g++ $^ -lSDL -lSDL_mixer -o $@
-
-$(PDCSDLDIR)/sdl1/libpdcurses.a: $(PDCSDLDIR)
-	cd `dirname $@` && make
-
-$(PDCSDLDIR): PDCurses-$(PDCSVER).tar.gz
-	tar xvfz $<
-
-PDCurses-$(PDCSVER).tar.gz:
-	wget http://sourceforge.net/projects/pdcurses/files/pdcurses/$(PDCSVER)/PDCurses-$(PDCSVER).tar.gz/download
-	if [[ ! -f $@ ]]; then echo "Download of $@ failed, please provide file."; exit; fi
+%.o: %.cpp
+	$(CXX) -c $(CFLAGS)  $<
 
+asciiportal: ap_input.o ap_draw.o ap_play.o main.o menu.o
+	$(CXX) $^ $(CFLAGS) $(LDFLAGS) -lncursesw -lstdc++ -o $@
 
